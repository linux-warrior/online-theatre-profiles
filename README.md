# online-theatre-profiles

Реализация профилей пользователей для онлайн-кинотеатра. Ссылка на оригинальный репозиторий проекта:
https://github.com/ishar8520/online-theatre/.

## Запуск проекта в Docker Compose

### Запуск в режиме продакшн

```shell
$ ./run_server.sh
```

### Запуск в режиме для разработчиков (с использованием Docker Compose Watch)

```shell
$ ./run_server.sh dev
```

## Запуск тестов в Docker Compose

### Стандартный запуск тестов

```shell
$ ./run_tests.sh
```

### Запуск тестов с указанием версии Python

```shell
$ PYTHON_VERSION=3.12 ./run_tests.sh
```

### Запуск тестов с использованием Docker Compose Watch

В одном окне терминала стартуем сервисы в watch mode:

```shell
$ ./run_tests.sh watch
```

Когда все контейнеры с сервисами запустятся, в другом окне терминала выполняем уже сами тесты:

```shell
$ ./run_tests.sh tests
```

## Статический анализ кода

### Стандартный запуск в Docker Compose

В качестве первого параметра скрипта необходимо передать название вида статического анализа.
Если второй параметр не задан, то соответствующая команда будет запущена в контейнере каждого
сервиса из Compose file, в котором она поддерживается:

```shell
$ ./run_lint.sh mypy
```

Доступны следующие названия команд статического анализа:
* `mypy`
* `ruff`

В качестве второго параметра можно указать название конкретного сервиса, код которого необходимо
проанализировать:

```shell
$ ./run_lint.sh mypy movies
```

Результаты статического анализа для каждого сервиса сохраняются в соответствующий том Docker,
который монтируется на хост-систему в директорию _.lint_.

### Запуск с использованием Docker Compose Watch

В одном окне терминала:

```shell
$ ./run_lint.sh watch
```

В другом окне терминала:

```shell
$ ./run_lint.sh watch mypy
```

Также возможен статический анализ кода конкретного сервиса:

```shell
$ ./run_lint.sh watch mypy movies
```
